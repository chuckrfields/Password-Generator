<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Password Generator</title>
    <!-- CSS only -->
    <link rel="stylesheet" href="css/reset.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
     <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <script>

        function GeneratePassword() {
            var passwordLength = prompt("Length? (8-128)");

            if (validatePasswordLength(passwordLength) === false) {
                alert("Password length must be between 8 and 128!");
                return false;
            }

            var includeLowerCase = confirm("Include lower case?");
            var includeUpperCase = confirm("Include upper case?");
            var includeNumeric = confirm("Include numbers?");
            var includeSpecialCharacters = confirm("Include special characters?");

            if (validateCharacterType(includeLowerCase, includeUpperCase, includeNumeric, includeSpecialCharacters) === false) {
                alert("You must select at least one character type!");
                return false;
            }

            generateUserPassword(passwordLength, includeLowerCase, includeUpperCase, includeNumeric, includeSpecialCharacters);

        }

        function generateUserPassword(passwordLength, includeLowerCase, includeUpperCase, includeNumeric, includeSpecialCharacters) {
            //Need to build string == passwordLength
            var password = '';

            //Need to determine how many character types have been selected
            //We plan to randomize the types as we build the password

            var characterTypes = [];
            
            if (includeLowerCase) {
                characterTypes.push("includeLowerCase");
            }

            if (includeUpperCase) {
                characterTypes.push("includeUpperCase");
            }

            if (includeNumeric) {
                characterTypes.push("includeNumeric");
            }

            if (includeSpecialCharacters) {
                characterTypes.push("includeSpecialCharacters");
            }

            var characterTypesLength = characterTypes.length;

            for (l = 0; l < passwordLength; l++) {

                //Get random character type
                var rndType = Math.floor(Math.random() * characterTypesLength);

                var CharType = characterTypes[rndType];

                if (CharType === "includeLowerCase" || CharType === "includeUpperCase") {
                    password += generateRandomString(includeLowerCase, includeUpperCase);
                }
                else if (CharType === "includeNumeric") {
                    password += generateRandomNumber();
                }
                else if (CharType === "includeSpecialCharacters") {
                    password += generateRandomSpecialCharacter();
                }

            }

            // alert(password);
            document.getElementById('lblPassword').innerHTML = JSON.stringify(password);
        }

        function generateRandomString(includeLowerCase, includeUpperCase) {
            var characters = '';
            var s = '';

            if (includeLowerCase) {
                characters += 'abcdefghijklmnopqrstuvwxyz';
            }
            if (includeUpperCase) {
                characters += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            }

            var charactersLength = characters.length;

            s = characters.charAt(Math.floor(Math.random() * charactersLength));
           
            return (s);

        }

        function generateRandomSpecialCharacter() {
            var characters =  " !#$%&'()*+,-./:;<=>?@[\]^_`{|}~";
            characters += '"';
            var charactersLength = characters.length;

            s = characters.charAt(Math.floor(Math.random() * charactersLength));
            return (s);
        }

        function generateRandomNumber() {
            var rnd = Math.floor(Math.random() * 10);
            return (rnd);
        }

        function validatePasswordLength(passwordLength) {
            if (passwordLength >= 8 && passwordLength <= 128) {
                return true;
            }
            else {
                return false;
            }
        }

        function validateCharacterType (includeLowerCase, includeUpperCase, includeNumeric, includeSpecialCharacters) {
            if (includeLowerCase === false && includeUpperCase === false && includeNumeric === false && includeSpecialCharacters === false) {
                return false;
            }
            else {
                return true;
            }
        }
    </script>

    <div class="card container">

        <div class="card-title text-center">
            <h1>Password Generator</h1>
        </div>   
            
        <div class="card-body">
                    <div class="card shadow p-3 mb-5 bg-white rounded" >
                        <div style="margin: 30px;">
                            <div class="card-title" >
                                <h4>Generate a Password</h4>
                            </div>
                            <hr>
                            <div class="card text-center">
                                <div class="card-title" >
                                    Your Secure Password
                                </div>
                                <p class="card-text"><label id="lblPassword"></label></p> <br>
                            </div>
                            <hr>
                        </div>
                    </div>

                    <div class="text-center">
                        <input class="btn btn-danger text-center responsive-width" type="submit" value="Generate Password" onclick="GeneratePassword();">
                    </div>
        </div>          
    </div>
</body>
</html>